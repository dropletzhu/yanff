DPDK_HEADERS = [
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_cirbuf.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_parse_etheraddr.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_parse.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_parse_ipaddr.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_parse_num.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_parse_portlist.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_parse_string.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_rdline.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_socket.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/cmdline_vt100.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_acl.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_acl_osdep.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_alarm.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_approx.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_arp.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_atomic_32.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_atomic_64.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_atomic.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_avp_common.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_avp_fifo.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_bitmap.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_bitrate.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_branch_prediction.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_bus.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_byteorder_32.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_byteorder_64.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_byteorder.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cfgfile.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_common.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_compat.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_config.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cpuflags.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cryptodev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cryptodev_pci.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cryptodev_pmd.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cryptodev_scheduler.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cryptodev_scheduler_operations.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cryptodev_vdev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_crypto.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_crypto_sym.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_cycles.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_debug.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_devargs.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_dev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_dev_info.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_distributor.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eal.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eal_memconfig.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_efd.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_errno.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eth_bond_8023ad.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eth_bond.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eth_ctrl.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_ethdev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_ethdev_pci.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_ethdev_vdev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_ether.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eth_ring.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eth_vhost.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eventdev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eventdev_pmd.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eventdev_pmd_pci.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_eventdev_pmd_vdev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_event_ring.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_fbk_hash.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_flow_driver.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_flow.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_gre.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_gro.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_hash_crc.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_hash.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_hexdump.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_icmp.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_interrupts.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_io.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_ip_frag.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_ip.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_jhash.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_jobstats.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_keepalive.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_kni.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_kvargs.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_latencystats.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_launch.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_lcore.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_log.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_lpm6.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_lpm.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_lpm_sse.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_lru.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_lru_x86.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_malloc.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_malloc_heap.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_mbuf.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_mbuf_ptype.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_memcpy.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_memory.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_mempool.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_memzone.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_meter.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_metrics.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_net_crc.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_net.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pause.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pci_dev_feature_defs.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pci_dev_features.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pci.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pdump.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_per_lcore.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pipeline.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pmd_bnxt.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pmd_i40e.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pmd_ixgbe.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_pmd_octeontx_ssovf.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port_ethdev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port_fd.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port_frag.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port_kni.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port_ras.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port_ring.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port_sched.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_port_source_sink.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_power.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_prefetch.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_random.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_reciprocal.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_red.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_reorder.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_ring.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_rtm.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_rwlock.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_sched_common.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_sched.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_sctp.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_service_component.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_service.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_spinlock.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_string_fns.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_table_acl.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_table_array.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_table.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_table_hash.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_table_lpm.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_table_lpm_ipv6.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_table_stub.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_tailq.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_tcp.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_thash.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_time.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_timer.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_tm_driver.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_tm.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_udp.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_vdev.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_vect.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_version.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/rte_vhost.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/exec-env/rte_dom0_common.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/exec-env/rte_interrupts.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/exec-env/rte_kni_common.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_atomic.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_byteorder.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_cpuflags.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_cycles.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_io.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_memcpy.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_pause.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_prefetch.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_rwlock.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_spinlock.h",
    "x86_64-native-linuxapp-gcc-install/include/dpdk/generic/rte_vect.h",
]

DPDK_LIBS = [
    "x86_64-native-linuxapp-gcc-install/lib/libdpdk.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_acl.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_bitratestats.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_cfgfile.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_cmdline.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_cryptodev.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_distributor.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_eal.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_efd.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_ethdev.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_eventdev.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_gro.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_hash.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_ip_frag.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_jobstats.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_kni.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_kvargs.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_latencystats.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_lpm.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_mbuf.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_mempool.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_mempool_ring.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_mempool_stack.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_meter.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_metrics.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_net.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pdump.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pipeline.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_af_packet.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_ark.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_avp.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_bnxt.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_bond.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_crypto_scheduler.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_cxgbe.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_e1000.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_ena.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_enic.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_failsafe.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_fm10k.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_i40e.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_ixgbe.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_kni.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_lio.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_nfp.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_null.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_null_crypto.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_octeontx_ssovf.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_qede.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_ring.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_sfc_efx.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_skeleton_event.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_sw_event.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_tap.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_thunderx_nicvf.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_vhost.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_virtio.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_pmd_vmxnet3_uio.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_port.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_power.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_reorder.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_ring.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_sched.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_table.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_timer.a",
    "x86_64-native-linuxapp-gcc-install/lib/librte_vhost.a",
]

DPDK_SCRIPTS = [
    "x86_64-native-linuxapp-gcc-install/share/dpdk/usertools/dpdk-devbind.py",
    "x86_64-native-linuxapp-gcc-install/share/dpdk/usertools/cpu_layout.py",
    "x86_64-native-linuxapp-gcc-install/share/dpdk/usertools/dpdk-pmdinfo.py",
]

DPDK_BINARIES = DPDK_HEADERS + DPDK_LIBS + DPDK_SCRIPTS

cc_library(
    name = "dpdk-build",
    srcs = DPDK_LIBS,
    hdrs = DPDK_HEADERS,
    includes = [
        "x86_64-native-linuxapp-gcc-install/include/dpdk",
    ],
    visibility = ["//visibility:public"],
)

genrule(
    name = "dpdk-run-make",
    srcs = [ ":dpdk-17.08" ],
    outs = DPDK_BINARIES,
    local = 1,
    cmd = """
make -C $(location :dpdk-17.08) config T=x86_64-native-linuxapp-gcc
make -j -C $(location :dpdk-17.08) install T=x86_64-native-linuxapp-gcc DESTDIR=x86_64-native-linuxapp-gcc-install
cp -r $(location :dpdk-17.08)/x86_64-native-linuxapp-gcc-install $(@D)/
""",
    visibility = ["//visibility:private"],
)
